services:
  livekit-agent-with-avatar:
    build:
      context: .
      dockerfile: Dockerfile
    # Environment variables
    env_file:
      - .env.local
    environment:
      - AGENT_NAME=agent_with_local_avatar
    volumes:
      - ./assets:/app/assets:ro
      - ./src/agents/agent_with_local_avatar.py:/app/src/agent.py
    # GPU access
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: [gpu, compute, utility, graphics]
  external-agent-with-avatar:
    build:
      context: .
      dockerfile: Dockerfile
    # Environment variables
    env_file:
      - .env.local
    environment:
      - AGENT_NAME=local_avatar_for_external_agent
    volumes:
      - ./assets:/app/assets:ro
      - ./src/agents/local_avatar_for_external_agent.py:/app/src/agent.py
    # GPU access
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: [gpu, compute, utility, graphics]
